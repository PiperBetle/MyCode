## task1:
直接上爆搜。
## task2:
直接用 $f_{l,r}$ 表示 $[l,r]$ 这段区间的方案数，枚举断点 $k$，但是不能直接转移，否则会重复计算 $1$ 连 $2$，$2$ 连 $3$ 这种情况。要在断点 $k$ 左边再搞个断点 $t$ 连接 $[l,t]$ 和 $[t+1,k]$，用乘法原理算出方案数之和再乘上 $[k+1,r]$ 即可。
## task3:
$f_{l,r,0}$ 表示 $[l,r]$ 必须连边的方案数，$f_{l,r,1}$ 表示 $[l,r]$ 必须不连边的方案数，$f_{l,r,0}$ 直接在 $[l,r]$ 中间枚举一个断点 $k$，利用乘法原理算方案数。$f_{l,r,1}$ 去枚举 $[l,k]$ 之间强制连边，然后连接 $k,r$，也利用乘法原理计算方案数即可 $\mathcal O(n^3)$ 解决，具体实现看 std。